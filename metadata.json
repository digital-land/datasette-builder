{
    "plugins": {
        "datasette-cors": {
            "host_wildcards": ["*"]
        },
        "datasette-leaflet-geojson": {
            "default_maps_to_load": 3
        }
    },
    "databases": {
        "view_model": {
            "tables": {
                "geography": {
                    "size": 10
                },
                "slug": {
                    "label_column": "slug"
                }
            },
            "queries": {
                "point_geography": {
                    "sql": "SELECT geography, name, geometry FROM geography WHERE geometry IS NOT NULL AND WITHIN(GeomFromText('POINT(' || :longitude || ' ' || :latitude || ')'), geom)",
                    "title": "Geographies that encompass a point"
                },
                "bounded_geography_old": {
                    "sql": "SELECT * FROM geography WHERE geography.rowid in (SELECT pkid FROM idx_geography_geom WHERE (xmin < :bbox_maxx AND xmax > :bbox_minx) AND (ymin < :bbox_maxy AND ymax > :bbox_miny))",
                    "title": "Geographies inside bounding box (old)"
                },
                "bounded_geography": {
                    "sql": "SELECT geojson_simple FROM geography_geom WHERE geography_geom.rowid in (SELECT pkid FROM idx_geography_geom_geom WHERE (xmin < :bbox_maxx AND xmax > :bbox_minx) AND (ymin < :bbox_maxy AND ymax > :bbox_miny))",
                    "title": "Geographies inside bounding box"
                },
                "bounded_geography_simplified": {
                    "sql": "SELECT geojson_simple FROM geography_geom WHERE geography_geom.rowid in (SELECT pkid FROM idx_geography_geom_geom WHERE (xmin < :bbox_maxx AND xmax > :bbox_minx) AND (ymin < :bbox_maxy AND ymax > :bbox_miny))",
                    "title": "Geographies inside bounding box (simplified)"
                },
                "bounded_geography_simplified_paged": {
                    "sql": "SELECT geojson_simple FROM geography_geom WHERE geography_geom.rowid > :after AND geography_geom.rowid in (SELECT pkid FROM idx_geography_geom_geom WHERE (xmin < :bbox_maxx AND xmax > :bbox_minx) AND (ymin < :bbox_maxy AND ymax > :bbox_miny)) ORDER BY rowid limit 100",
                    "title": "Geographies inside bounding box (simplified) page size 100"
                }
            }
        },
        "development-plan-document": {
            "tables": {
                "entry": {
                    "label_column": "entity"
                },
                "fact": {
                    "label_column": "attribute"
                }
            }
        }
    }
}
